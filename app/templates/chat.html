{% extends "base.html" %}
{% block content %}
<h2>Chat with {{ user_id }}</h2>
<div id="chat-box" style="border:1px solid #ccc; padding:10px; height:300px; overflow-y:scroll;">
	{% for msg in messages %}
		<p><strong>{{ msg.sender_id }}:</strong> {{ msg.content }} <small>{{ msg.created_at }}</small></p>
	{% else %}
		<p>No messages</p>
	{% endfor %}
</div>

<form id="chat-form">
	<input type="text" id="msg-input" name="content" placeholder="Введите сообщение" required>
	<button type="submit">Send</button>
</form>
<a href="/chats">Back to chatlist</a>

<script>
	window.lastMessageId = {{ messages[-1].id if messages else 0 }};
	window.chatUserId = {{ user_id }};
</script>
<script src="/static/scripts/chat.js"></script>
{% endblock %}